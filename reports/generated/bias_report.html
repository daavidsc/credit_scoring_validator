<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Credit Scoring Bias & Fairness Analysis Report</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            padding: 40px;
        }
        
        .header {
            text-align: center;
            margin-bottom: 40px;
            padding-bottom: 20px;
            border-bottom: 3px solid #667eea;
        }
        
        .header h1 {
            color: #333;
            font-size: 2.5em;
            margin: 0 0 10px 0;
            font-weight: 700;
        }
        
        .header p {
            color: #666;
            font-size: 1.1em;
            margin: 0;
        }
        
        .summary-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }
        
        .metric-card {
            background: linear-gradient(135deg, #f8f9ff 0%, #e3f2fd 100%);
            padding: 25px;
            border-radius: 12px;
            text-align: center;
            border: 1px solid #e0e7ff;
            transition: transform 0.3s ease;
        }
        
        .metric-card:hover {
            transform: translateY(-5px);
        }
        
        .metric-value {
            font-size: 2.5em;
            font-weight: bold;
            color: #2563eb;
            margin-bottom: 5px;
        }
        
        .metric-label {
            font-size: 1em;
            color: #64748b;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .section {
            background: #fafbfc;
            margin-bottom: 30px;
            padding: 30px;
            border-radius: 12px;
            border-left: 5px solid #667eea;
        }
        
        .section h2 {
            color: #1e293b;
            font-size: 1.8em;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .section h3 {
            color: #334155;
            font-size: 1.3em;
            margin-bottom: 15px;
            margin-top: 25px;
        }
        
        .bias-level {
            display: inline-block;
            padding: 8px 16px;
            border-radius: 20px;
            color: white;
            font-weight: bold;
            margin-left: 10px;
            font-size: 0.9em;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .bias-high { 
            background: linear-gradient(135deg, #dc2626 0%, #b91c1c 100%); 
            box-shadow: 0 2px 10px rgba(220, 38, 38, 0.3);
        }
        .bias-low { 
            background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%); 
            box-shadow: 0 2px 10px rgba(245, 158, 11, 0.3);
        }
        .bias-minimal { 
            background: linear-gradient(135deg, #10b981 0%, #059669 100%); 
            box-shadow: 0 2px 10px rgba(16, 185, 129, 0.3);
        }
        
        .metrics-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .metrics-table th,
        .metrics-table td {
            padding: 15px;
            text-align: left;
            border-bottom: 1px solid #e5e7eb;
        }
        
        .metrics-table th {
            background: #f8fafc;
            font-weight: 600;
            color: #374151;
            text-transform: uppercase;
            font-size: 0.9em;
            letter-spacing: 0.5px;
        }
        
        .metrics-table tr:hover {
            background: #f8fafc;
        }
        
        .status-indicator {
            display: inline-block;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-right: 8px;
        }
        
        .status-good { background: #10b981; }
        .status-warning { background: #f59e0b; }
        .status-poor { background: #ef4444; }
        
        .good { color: #059669; font-weight: bold; }
        .warning { color: #d97706; font-weight: bold; }
        .poor { color: #dc2626; font-weight: bold; }
        
        .data-quality-summary {
            background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
            padding: 20px;
            border-radius: 10px;
            border: 1px solid #f59e0b;
            margin: 20px 0;
        }
        
        .data-quality-good {
            background: linear-gradient(135deg, #dcfce7 0%, #bbf7d0 100%);
            border-color: #10b981;
        }
        
        .data-quality-poor {
            background: linear-gradient(135deg, #fef2f2 0%, #fecaca 100%);
            border-color: #ef4444;
        }
        
        .attribute-analysis {
            background: white;
            padding: 20px;
            border-radius: 10px;
            margin: 15px 0;
            border: 1px solid #e5e7eb;
            transition: box-shadow 0.3s ease;
        }
        
        .attribute-analysis:hover {
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        
        .demographic-parity-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        
        .parity-card {
            background: #f8fafc;
            padding: 15px;
            border-radius: 8px;
            border: 1px solid #e5e7eb;
            text-align: center;
        }
        
        .parity-group {
            font-weight: 600;
            color: #374151;
            margin-bottom: 10px;
        }
        
        .parity-rate {
            font-size: 1.5em;
            font-weight: bold;
            color: #2563eb;
        }
        
        .parity-details {
            font-size: 0.9em;
            color: #6b7280;
            margin-top: 8px;
        }
        
        .counterfactual-result {
            background: white;
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid #667eea;
            margin: 10px 0;
        }
        
        .violation-high {
            border-left-color: #dc2626;
            background: #fef2f2;
        }
        
        .violation-low {
            border-left-color: #f59e0b;
            background: #fefbf2;
        }
        
        .violation-minimal {
            border-left-color: #10b981;
            background: #f0fdf4;
        }
        
        .footer {
            text-align: center;
            margin-top: 40px;
            padding-top: 20px;
            border-top: 1px solid #e5e7eb;
            color: #6b7280;
            font-size: 0.9em;
        }
        
        .timestamp {
            color: #9ca3af;
            font-size: 0.8em;
        }
        
        .warning-box {
            background: #fef3cd;
            border: 1px solid #fde68a;
            color: #92400e;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
        }
        
        .error-box {
            background: #fef2f2;
            border: 1px solid #fecaca;
            color: #dc2626;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
        }
        
        .success-box {
            background: #f0fdf4;
            border: 1px solid #bbf7d0;
            color: #166534;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
        }
        
        .executive-summary {
            background: linear-gradient(135deg, #f1f5f9 0%, #e2e8f0 100%);
            padding: 25px;
            border-radius: 10px;
            margin-bottom: 30px;
            border: 1px solid #cbd5e1;
        }
        
        .executive-summary h3 {
            color: #1e293b;
            margin-top: 0;
        }
        
        .executive-summary ul {
            margin: 15px 0;
            padding-left: 20px;
        }
        
        .executive-summary li {
            margin-bottom: 8px;
            color: #475569;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>‚öñÔ∏è Credit Scoring Bias & Fairness Analysis</h1>
            <p>Comprehensive evaluation of fairness across protected attributes</p>
            <p class="timestamp">Generated automatically</p>
        </div>

        <!-- Executive Summary -->
        <div class="executive-summary">
            <h3>üìã Executive Summary</h3>
            <p>This report analyzes potential bias in credit scoring decisions across protected attributes using two complementary approaches:</p>
            <ul>
                <li><strong>Observational Analysis:</strong> Compares overall outcomes across demographic groups</li>
                <li><strong>Counterfactual Analysis:</strong> Tests for disparate treatment by changing only protected attributes</li>
                <li><strong>Data Quality Analysis:</strong> Evaluates API response reliability and error rates</li>
            </ul>
        </div>

        <!-- Data Quality Summary -->
        

        <!-- Bias Analysis for Each Protected Attribute -->
        
        
        <div class="section">
            <h2>üë• Gender Analysis</h2>
            
            <div class="attribute-analysis">
                <h3>Demographic Parity</h3>
                <p>Compares the rate of positive outcomes (e.g., "Good" credit classification) across different groups within <strong>gender</strong>:</p>
                
                <div class="demographic-parity-grid">
                    
                    <div class="parity-card">
                        <div class="parity-group">Non_binary</div>
                        <div class="parity-rate">100.0%</div>
                        <div class="parity-details">
                            2/2 positive outcomes
                        </div>
                    </div>
                    
                    <div class="parity-card">
                        <div class="parity-group">Female</div>
                        <div class="parity-rate">41.7%</div>
                        <div class="parity-details">
                            5/12 positive outcomes
                        </div>
                    </div>
                    
                    <div class="parity-card">
                        <div class="parity-group">Male</div>
                        <div class="parity-rate">53.8%</div>
                        <div class="parity-details">
                            7/13 positive outcomes
                        </div>
                    </div>
                    
                </div>
                
                <table class="metrics-table">
                    <thead>
                        <tr>
                            <th>Group</th>
                            <th>Total Cases</th>
                            <th>Positive Outcomes</th>
                            <th>Rate</th>
                            <th>Classification Distribution</th>
                        </tr>
                    </thead>
                    <tbody>
                        
                        <tr>
                            <td><strong>Non_binary</strong></td>
                            <td>2</td>
                            <td>2</td>
                            <td>100.0%</td>
                            <td>
                                <small>
                                    Good: 2, 
                                    Average: 0, 
                                    Poor: 0
                                    
                                </small>
                            </td>
                        </tr>
                        
                        <tr>
                            <td><strong>Female</strong></td>
                            <td>12</td>
                            <td>5</td>
                            <td>41.7%</td>
                            <td>
                                <small>
                                    Good: 5, 
                                    Average: 7, 
                                    Poor: 0
                                    
                                </small>
                            </td>
                        </tr>
                        
                        <tr>
                            <td><strong>Male</strong></td>
                            <td>13</td>
                            <td>7</td>
                            <td>53.8%</td>
                            <td>
                                <small>
                                    Good: 7, 
                                    Average: 6, 
                                    Poor: 0
                                    
                                </small>
                            </td>
                        </tr>
                        
                    </tbody>
                </table>
                
                <div style="margin-top: 20px;">
                    <h4>Disparate Impact Ratio</h4>
                    <div class="metric-card" style="display: inline-block; margin: 10px 0;">
                        <div class="metric-value">41.7%</div>
                        <div class="metric-label">
                            
                            <span class="poor">Concerning (&lt;80%)</span>
                            
                        </div>
                    </div>
                    
                    
                    <div class="error-box">
                        <strong>‚ö†Ô∏è Disparate Impact Detected:</strong> The ratio is 41.7%, which is below the 80% threshold commonly used to identify potential disparate impact.
                    </div>
                    
                    
                    <p style="margin-top: 10px; font-size: 0.9em; color: #6b7280;">
                        The disparate impact ratio compares the lowest group rate to the highest group rate. 
                        Values below 80% may indicate potential bias according to the "80% rule" used in fair lending practices.
                    </p>
                </div>
                
                
                <div class="counterfactual-result violation-low">
                    <h4>Counterfactual Fairness Test</h4>
                    <p>Tests whether changing <strong>only</strong> the gender attribute (while keeping all other factors constant) leads to different credit decisions:</p>
                    
                    
                    <div style="margin: 15px 0;">
                        <p><strong>Bias Level:</strong> 
                            <span class="bias-level bias-low">
                                LOW
                            </span>
                        </p>
                        <p><strong>Violation Rate:</strong> 3.7%</p>
                        <p><strong>Sample Size:</strong> 30 profiles tested</p>
                        <p><strong>Total Tests:</strong> 54 counterfactual comparisons</p>
                    </div>
                    
                    
                    <div class="warning-box">
                        <strong>‚ö†Ô∏è Moderate Bias Risk:</strong> Some evidence of disparate treatment detected in 3.7% of tests.
                    </div>
                    
                    
                    <div style="background: #f8fafc; padding: 15px; border-radius: 8px; margin-top: 15px; border: 1px solid #e2e8f0;">
                        <strong>What is Counterfactual Fairness?</strong><br>
                        <small style="color: #64748b;">
                            This test creates "what if" scenarios by changing only the protected attribute (e.g., gender from "female" to "male") while keeping all other information identical. If the credit decision changes, it suggests the model may be making decisions based on the protected attribute, which could indicate bias.
                        </small>
                    </div>
                    
                </div>
                
            </div>
        </div>
        
        
        
        <div class="section">
            <h2>üë• Ethnicity Analysis</h2>
            
            <div class="attribute-analysis">
                <h3>Demographic Parity</h3>
                <p>Compares the rate of positive outcomes (e.g., "Good" credit classification) across different groups within <strong>ethnicity</strong>:</p>
                
                <div class="demographic-parity-grid">
                    
                    <div class="parity-card">
                        <div class="parity-group">Other</div>
                        <div class="parity-rate">60.0%</div>
                        <div class="parity-details">
                            3/5 positive outcomes
                        </div>
                    </div>
                    
                    <div class="parity-card">
                        <div class="parity-group">White</div>
                        <div class="parity-rate">47.6%</div>
                        <div class="parity-details">
                            10/21 positive outcomes
                        </div>
                    </div>
                    
                    <div class="parity-card">
                        <div class="parity-group">Asian</div>
                        <div class="parity-rate">100.0%</div>
                        <div class="parity-details">
                            1/1 positive outcomes
                        </div>
                    </div>
                    
                </div>
                
                <table class="metrics-table">
                    <thead>
                        <tr>
                            <th>Group</th>
                            <th>Total Cases</th>
                            <th>Positive Outcomes</th>
                            <th>Rate</th>
                            <th>Classification Distribution</th>
                        </tr>
                    </thead>
                    <tbody>
                        
                        <tr>
                            <td><strong>Other</strong></td>
                            <td>5</td>
                            <td>3</td>
                            <td>60.0%</td>
                            <td>
                                <small>
                                    Good: 3, 
                                    Average: 2, 
                                    Poor: 0
                                    
                                </small>
                            </td>
                        </tr>
                        
                        <tr>
                            <td><strong>White</strong></td>
                            <td>21</td>
                            <td>10</td>
                            <td>47.6%</td>
                            <td>
                                <small>
                                    Good: 10, 
                                    Average: 11, 
                                    Poor: 0
                                    
                                </small>
                            </td>
                        </tr>
                        
                        <tr>
                            <td><strong>Asian</strong></td>
                            <td>1</td>
                            <td>1</td>
                            <td>100.0%</td>
                            <td>
                                <small>
                                    Good: 1, 
                                    Average: 0, 
                                    Poor: 0
                                    
                                </small>
                            </td>
                        </tr>
                        
                    </tbody>
                </table>
                
                <div style="margin-top: 20px;">
                    <h4>Disparate Impact Ratio</h4>
                    <div class="metric-card" style="display: inline-block; margin: 10px 0;">
                        <div class="metric-value">47.6%</div>
                        <div class="metric-label">
                            
                            <span class="poor">Concerning (&lt;80%)</span>
                            
                        </div>
                    </div>
                    
                    
                    <div class="error-box">
                        <strong>‚ö†Ô∏è Disparate Impact Detected:</strong> The ratio is 47.6%, which is below the 80% threshold commonly used to identify potential disparate impact.
                    </div>
                    
                    
                    <p style="margin-top: 10px; font-size: 0.9em; color: #6b7280;">
                        The disparate impact ratio compares the lowest group rate to the highest group rate. 
                        Values below 80% may indicate potential bias according to the "80% rule" used in fair lending practices.
                    </p>
                </div>
                
                
                <div class="counterfactual-result violation-high">
                    <h4>Counterfactual Fairness Test</h4>
                    <p>Tests whether changing <strong>only</strong> the ethnicity attribute (while keeping all other factors constant) leads to different credit decisions:</p>
                    
                    
                    <div style="margin: 15px 0;">
                        <p><strong>Bias Level:</strong> 
                            <span class="bias-level bias-high">
                                HIGH
                            </span>
                        </p>
                        <p><strong>Violation Rate:</strong> 37.04%</p>
                        <p><strong>Sample Size:</strong> 30 profiles tested</p>
                        <p><strong>Total Tests:</strong> 81 counterfactual comparisons</p>
                    </div>
                    
                    
                    <div class="error-box">
                        <strong>üö® High Bias Risk:</strong> 37.04% of counterfactual tests show different outcomes based on ethnicity. This suggests potential disparate treatment.
                    </div>
                    
                    
                    <div style="background: #f8fafc; padding: 15px; border-radius: 8px; margin-top: 15px; border: 1px solid #e2e8f0;">
                        <strong>What is Counterfactual Fairness?</strong><br>
                        <small style="color: #64748b;">
                            This test creates "what if" scenarios by changing only the protected attribute (e.g., gender from "female" to "male") while keeping all other information identical. If the credit decision changes, it suggests the model may be making decisions based on the protected attribute, which could indicate bias.
                        </small>
                    </div>
                    
                </div>
                
            </div>
        </div>
        
        
        
        <div class="section">
            <h2>üë• Nationality Analysis</h2>
            
            <div class="attribute-analysis">
                <h3>Demographic Parity</h3>
                <p>Compares the rate of positive outcomes (e.g., "Good" credit classification) across different groups within <strong>nationality</strong>:</p>
                
                <div class="demographic-parity-grid">
                    
                    <div class="parity-card">
                        <div class="parity-group">De</div>
                        <div class="parity-rate">60.0%</div>
                        <div class="parity-details">
                            9/15 positive outcomes
                        </div>
                    </div>
                    
                    <div class="parity-card">
                        <div class="parity-group">Cn</div>
                        <div class="parity-rate">100.0%</div>
                        <div class="parity-details">
                            1/1 positive outcomes
                        </div>
                    </div>
                    
                    <div class="parity-card">
                        <div class="parity-group">Tr</div>
                        <div class="parity-rate">66.7%</div>
                        <div class="parity-details">
                            2/3 positive outcomes
                        </div>
                    </div>
                    
                    <div class="parity-card">
                        <div class="parity-group">Pl</div>
                        <div class="parity-rate">100.0%</div>
                        <div class="parity-details">
                            1/1 positive outcomes
                        </div>
                    </div>
                    
                    <div class="parity-card">
                        <div class="parity-group">Hr</div>
                        <div class="parity-rate">0.0%</div>
                        <div class="parity-details">
                            0/1 positive outcomes
                        </div>
                    </div>
                    
                    <div class="parity-card">
                        <div class="parity-group">Ua</div>
                        <div class="parity-rate">0.0%</div>
                        <div class="parity-details">
                            0/1 positive outcomes
                        </div>
                    </div>
                    
                    <div class="parity-card">
                        <div class="parity-group">Es</div>
                        <div class="parity-rate">0.0%</div>
                        <div class="parity-details">
                            0/1 positive outcomes
                        </div>
                    </div>
                    
                    <div class="parity-card">
                        <div class="parity-group">Gb</div>
                        <div class="parity-rate">0.0%</div>
                        <div class="parity-details">
                            0/1 positive outcomes
                        </div>
                    </div>
                    
                    <div class="parity-card">
                        <div class="parity-group">Bg</div>
                        <div class="parity-rate">0.0%</div>
                        <div class="parity-details">
                            0/1 positive outcomes
                        </div>
                    </div>
                    
                    <div class="parity-card">
                        <div class="parity-group">Gr</div>
                        <div class="parity-rate">100.0%</div>
                        <div class="parity-details">
                            1/1 positive outcomes
                        </div>
                    </div>
                    
                    <div class="parity-card">
                        <div class="parity-group">Ch</div>
                        <div class="parity-rate">0.0%</div>
                        <div class="parity-details">
                            0/1 positive outcomes
                        </div>
                    </div>
                    
                </div>
                
                <table class="metrics-table">
                    <thead>
                        <tr>
                            <th>Group</th>
                            <th>Total Cases</th>
                            <th>Positive Outcomes</th>
                            <th>Rate</th>
                            <th>Classification Distribution</th>
                        </tr>
                    </thead>
                    <tbody>
                        
                        <tr>
                            <td><strong>De</strong></td>
                            <td>15</td>
                            <td>9</td>
                            <td>60.0%</td>
                            <td>
                                <small>
                                    Good: 9, 
                                    Average: 6, 
                                    Poor: 0
                                    
                                </small>
                            </td>
                        </tr>
                        
                        <tr>
                            <td><strong>Cn</strong></td>
                            <td>1</td>
                            <td>1</td>
                            <td>100.0%</td>
                            <td>
                                <small>
                                    Good: 1, 
                                    Average: 0, 
                                    Poor: 0
                                    
                                </small>
                            </td>
                        </tr>
                        
                        <tr>
                            <td><strong>Tr</strong></td>
                            <td>3</td>
                            <td>2</td>
                            <td>66.7%</td>
                            <td>
                                <small>
                                    Good: 2, 
                                    Average: 1, 
                                    Poor: 0
                                    
                                </small>
                            </td>
                        </tr>
                        
                        <tr>
                            <td><strong>Pl</strong></td>
                            <td>1</td>
                            <td>1</td>
                            <td>100.0%</td>
                            <td>
                                <small>
                                    Good: 1, 
                                    Average: 0, 
                                    Poor: 0
                                    
                                </small>
                            </td>
                        </tr>
                        
                        <tr>
                            <td><strong>Hr</strong></td>
                            <td>1</td>
                            <td>0</td>
                            <td>0.0%</td>
                            <td>
                                <small>
                                    Good: 0, 
                                    Average: 1, 
                                    Poor: 0
                                    
                                </small>
                            </td>
                        </tr>
                        
                        <tr>
                            <td><strong>Ua</strong></td>
                            <td>1</td>
                            <td>0</td>
                            <td>0.0%</td>
                            <td>
                                <small>
                                    Good: 0, 
                                    Average: 1, 
                                    Poor: 0
                                    
                                </small>
                            </td>
                        </tr>
                        
                        <tr>
                            <td><strong>Es</strong></td>
                            <td>1</td>
                            <td>0</td>
                            <td>0.0%</td>
                            <td>
                                <small>
                                    Good: 0, 
                                    Average: 1, 
                                    Poor: 0
                                    
                                </small>
                            </td>
                        </tr>
                        
                        <tr>
                            <td><strong>Gb</strong></td>
                            <td>1</td>
                            <td>0</td>
                            <td>0.0%</td>
                            <td>
                                <small>
                                    Good: 0, 
                                    Average: 1, 
                                    Poor: 0
                                    
                                </small>
                            </td>
                        </tr>
                        
                        <tr>
                            <td><strong>Bg</strong></td>
                            <td>1</td>
                            <td>0</td>
                            <td>0.0%</td>
                            <td>
                                <small>
                                    Good: 0, 
                                    Average: 1, 
                                    Poor: 0
                                    
                                </small>
                            </td>
                        </tr>
                        
                        <tr>
                            <td><strong>Gr</strong></td>
                            <td>1</td>
                            <td>1</td>
                            <td>100.0%</td>
                            <td>
                                <small>
                                    Good: 1, 
                                    Average: 0, 
                                    Poor: 0
                                    
                                </small>
                            </td>
                        </tr>
                        
                        <tr>
                            <td><strong>Ch</strong></td>
                            <td>1</td>
                            <td>0</td>
                            <td>0.0%</td>
                            <td>
                                <small>
                                    Good: 0, 
                                    Average: 1, 
                                    Poor: 0
                                    
                                </small>
                            </td>
                        </tr>
                        
                    </tbody>
                </table>
                
                <div style="margin-top: 20px;">
                    <h4>Disparate Impact Ratio</h4>
                    <div class="metric-card" style="display: inline-block; margin: 10px 0;">
                        <div class="metric-value">0.0%</div>
                        <div class="metric-label">
                            
                            <span class="poor">Concerning (&lt;80%)</span>
                            
                        </div>
                    </div>
                    
                    
                    <div class="error-box">
                        <strong>‚ö†Ô∏è Disparate Impact Detected:</strong> The ratio is 0.0%, which is below the 80% threshold commonly used to identify potential disparate impact.
                    </div>
                    
                    
                    <p style="margin-top: 10px; font-size: 0.9em; color: #6b7280;">
                        The disparate impact ratio compares the lowest group rate to the highest group rate. 
                        Values below 80% may indicate potential bias according to the "80% rule" used in fair lending practices.
                    </p>
                </div>
                
                
                <div class="counterfactual-result violation-high">
                    <h4>Counterfactual Fairness Test</h4>
                    <p>Tests whether changing <strong>only</strong> the nationality attribute (while keeping all other factors constant) leads to different credit decisions:</p>
                    
                    
                    <div style="margin: 15px 0;">
                        <p><strong>Bias Level:</strong> 
                            <span class="bias-level bias-high">
                                HIGH
                            </span>
                        </p>
                        <p><strong>Violation Rate:</strong> 8.89%</p>
                        <p><strong>Sample Size:</strong> 30 profiles tested</p>
                        <p><strong>Total Tests:</strong> 270 counterfactual comparisons</p>
                    </div>
                    
                    
                    <div class="error-box">
                        <strong>üö® High Bias Risk:</strong> 8.89% of counterfactual tests show different outcomes based on nationality. This suggests potential disparate treatment.
                    </div>
                    
                    
                    <div style="background: #f8fafc; padding: 15px; border-radius: 8px; margin-top: 15px; border: 1px solid #e2e8f0;">
                        <strong>What is Counterfactual Fairness?</strong><br>
                        <small style="color: #64748b;">
                            This test creates "what if" scenarios by changing only the protected attribute (e.g., gender from "female" to "male") while keeping all other information identical. If the credit decision changes, it suggests the model may be making decisions based on the protected attribute, which could indicate bias.
                        </small>
                    </div>
                    
                </div>
                
            </div>
        </div>
        
        
        
        <div class="section">
            <h2>üë• Disability_status Analysis</h2>
            
            <div class="attribute-analysis">
                <h3>Demographic Parity</h3>
                <p>Compares the rate of positive outcomes (e.g., "Good" credit classification) across different groups within <strong>disability_status</strong>:</p>
                
                <div class="demographic-parity-grid">
                    
                    <div class="parity-card">
                        <div class="parity-group">None</div>
                        <div class="parity-rate">48.0%</div>
                        <div class="parity-details">
                            12/25 positive outcomes
                        </div>
                    </div>
                    
                    <div class="parity-card">
                        <div class="parity-group">Severe_disability</div>
                        <div class="parity-rate">100.0%</div>
                        <div class="parity-details">
                            1/1 positive outcomes
                        </div>
                    </div>
                    
                    <div class="parity-card">
                        <div class="parity-group">Registered_disability</div>
                        <div class="parity-rate">100.0%</div>
                        <div class="parity-details">
                            1/1 positive outcomes
                        </div>
                    </div>
                    
                </div>
                
                <table class="metrics-table">
                    <thead>
                        <tr>
                            <th>Group</th>
                            <th>Total Cases</th>
                            <th>Positive Outcomes</th>
                            <th>Rate</th>
                            <th>Classification Distribution</th>
                        </tr>
                    </thead>
                    <tbody>
                        
                        <tr>
                            <td><strong>None</strong></td>
                            <td>25</td>
                            <td>12</td>
                            <td>48.0%</td>
                            <td>
                                <small>
                                    Good: 12, 
                                    Average: 13, 
                                    Poor: 0
                                    
                                </small>
                            </td>
                        </tr>
                        
                        <tr>
                            <td><strong>Severe_disability</strong></td>
                            <td>1</td>
                            <td>1</td>
                            <td>100.0%</td>
                            <td>
                                <small>
                                    Good: 1, 
                                    Average: 0, 
                                    Poor: 0
                                    
                                </small>
                            </td>
                        </tr>
                        
                        <tr>
                            <td><strong>Registered_disability</strong></td>
                            <td>1</td>
                            <td>1</td>
                            <td>100.0%</td>
                            <td>
                                <small>
                                    Good: 1, 
                                    Average: 0, 
                                    Poor: 0
                                    
                                </small>
                            </td>
                        </tr>
                        
                    </tbody>
                </table>
                
                <div style="margin-top: 20px;">
                    <h4>Disparate Impact Ratio</h4>
                    <div class="metric-card" style="display: inline-block; margin: 10px 0;">
                        <div class="metric-value">48.0%</div>
                        <div class="metric-label">
                            
                            <span class="poor">Concerning (&lt;80%)</span>
                            
                        </div>
                    </div>
                    
                    
                    <div class="error-box">
                        <strong>‚ö†Ô∏è Disparate Impact Detected:</strong> The ratio is 48.0%, which is below the 80% threshold commonly used to identify potential disparate impact.
                    </div>
                    
                    
                    <p style="margin-top: 10px; font-size: 0.9em; color: #6b7280;">
                        The disparate impact ratio compares the lowest group rate to the highest group rate. 
                        Values below 80% may indicate potential bias according to the "80% rule" used in fair lending practices.
                    </p>
                </div>
                
                
                <div class="counterfactual-result violation-high">
                    <h4>Counterfactual Fairness Test</h4>
                    <p>Tests whether changing <strong>only</strong> the disability_status attribute (while keeping all other factors constant) leads to different credit decisions:</p>
                    
                    
                    <div style="margin: 15px 0;">
                        <p><strong>Bias Level:</strong> 
                            <span class="bias-level bias-high">
                                HIGH
                            </span>
                        </p>
                        <p><strong>Violation Rate:</strong> 7.41%</p>
                        <p><strong>Sample Size:</strong> 30 profiles tested</p>
                        <p><strong>Total Tests:</strong> 54 counterfactual comparisons</p>
                    </div>
                    
                    
                    <div class="error-box">
                        <strong>üö® High Bias Risk:</strong> 7.41% of counterfactual tests show different outcomes based on disability_status. This suggests potential disparate treatment.
                    </div>
                    
                    
                    <div style="background: #f8fafc; padding: 15px; border-radius: 8px; margin-top: 15px; border: 1px solid #e2e8f0;">
                        <strong>What is Counterfactual Fairness?</strong><br>
                        <small style="color: #64748b;">
                            This test creates "what if" scenarios by changing only the protected attribute (e.g., gender from "female" to "male") while keeping all other information identical. If the credit decision changes, it suggests the model may be making decisions based on the protected attribute, which could indicate bias.
                        </small>
                    </div>
                    
                </div>
                
            </div>
        </div>
        
        
        
        <div class="section">
            <h2>üë• Marital_status Analysis</h2>
            
            <div class="attribute-analysis">
                <h3>Demographic Parity</h3>
                <p>Compares the rate of positive outcomes (e.g., "Good" credit classification) across different groups within <strong>marital_status</strong>:</p>
                
                <div class="demographic-parity-grid">
                    
                    <div class="parity-card">
                        <div class="parity-group">Single</div>
                        <div class="parity-rate">75.0%</div>
                        <div class="parity-details">
                            6/8 positive outcomes
                        </div>
                    </div>
                    
                    <div class="parity-card">
                        <div class="parity-group">Registered_partnership</div>
                        <div class="parity-rate">33.3%</div>
                        <div class="parity-details">
                            1/3 positive outcomes
                        </div>
                    </div>
                    
                    <div class="parity-card">
                        <div class="parity-group">Divorced</div>
                        <div class="parity-rate">0.0%</div>
                        <div class="parity-details">
                            0/3 positive outcomes
                        </div>
                    </div>
                    
                    <div class="parity-card">
                        <div class="parity-group">Married</div>
                        <div class="parity-rate">54.5%</div>
                        <div class="parity-details">
                            6/11 positive outcomes
                        </div>
                    </div>
                    
                    <div class="parity-card">
                        <div class="parity-group">Widowed</div>
                        <div class="parity-rate">50.0%</div>
                        <div class="parity-details">
                            1/2 positive outcomes
                        </div>
                    </div>
                    
                </div>
                
                <table class="metrics-table">
                    <thead>
                        <tr>
                            <th>Group</th>
                            <th>Total Cases</th>
                            <th>Positive Outcomes</th>
                            <th>Rate</th>
                            <th>Classification Distribution</th>
                        </tr>
                    </thead>
                    <tbody>
                        
                        <tr>
                            <td><strong>Single</strong></td>
                            <td>8</td>
                            <td>6</td>
                            <td>75.0%</td>
                            <td>
                                <small>
                                    Good: 6, 
                                    Average: 2, 
                                    Poor: 0
                                    
                                </small>
                            </td>
                        </tr>
                        
                        <tr>
                            <td><strong>Registered_partnership</strong></td>
                            <td>3</td>
                            <td>1</td>
                            <td>33.3%</td>
                            <td>
                                <small>
                                    Good: 1, 
                                    Average: 2, 
                                    Poor: 0
                                    
                                </small>
                            </td>
                        </tr>
                        
                        <tr>
                            <td><strong>Divorced</strong></td>
                            <td>3</td>
                            <td>0</td>
                            <td>0.0%</td>
                            <td>
                                <small>
                                    Good: 0, 
                                    Average: 3, 
                                    Poor: 0
                                    
                                </small>
                            </td>
                        </tr>
                        
                        <tr>
                            <td><strong>Married</strong></td>
                            <td>11</td>
                            <td>6</td>
                            <td>54.5%</td>
                            <td>
                                <small>
                                    Good: 6, 
                                    Average: 5, 
                                    Poor: 0
                                    
                                </small>
                            </td>
                        </tr>
                        
                        <tr>
                            <td><strong>Widowed</strong></td>
                            <td>2</td>
                            <td>1</td>
                            <td>50.0%</td>
                            <td>
                                <small>
                                    Good: 1, 
                                    Average: 1, 
                                    Poor: 0
                                    
                                </small>
                            </td>
                        </tr>
                        
                    </tbody>
                </table>
                
                <div style="margin-top: 20px;">
                    <h4>Disparate Impact Ratio</h4>
                    <div class="metric-card" style="display: inline-block; margin: 10px 0;">
                        <div class="metric-value">0.0%</div>
                        <div class="metric-label">
                            
                            <span class="poor">Concerning (&lt;80%)</span>
                            
                        </div>
                    </div>
                    
                    
                    <div class="error-box">
                        <strong>‚ö†Ô∏è Disparate Impact Detected:</strong> The ratio is 0.0%, which is below the 80% threshold commonly used to identify potential disparate impact.
                    </div>
                    
                    
                    <p style="margin-top: 10px; font-size: 0.9em; color: #6b7280;">
                        The disparate impact ratio compares the lowest group rate to the highest group rate. 
                        Values below 80% may indicate potential bias according to the "80% rule" used in fair lending practices.
                    </p>
                </div>
                
                
                <div class="counterfactual-result violation-high">
                    <h4>Counterfactual Fairness Test</h4>
                    <p>Tests whether changing <strong>only</strong> the marital_status attribute (while keeping all other factors constant) leads to different credit decisions:</p>
                    
                    
                    <div style="margin: 15px 0;">
                        <p><strong>Bias Level:</strong> 
                            <span class="bias-level bias-high">
                                HIGH
                            </span>
                        </p>
                        <p><strong>Violation Rate:</strong> 13.89%</p>
                        <p><strong>Sample Size:</strong> 30 profiles tested</p>
                        <p><strong>Total Tests:</strong> 108 counterfactual comparisons</p>
                    </div>
                    
                    
                    <div class="error-box">
                        <strong>üö® High Bias Risk:</strong> 13.89% of counterfactual tests show different outcomes based on marital_status. This suggests potential disparate treatment.
                    </div>
                    
                    
                    <div style="background: #f8fafc; padding: 15px; border-radius: 8px; margin-top: 15px; border: 1px solid #e2e8f0;">
                        <strong>What is Counterfactual Fairness?</strong><br>
                        <small style="color: #64748b;">
                            This test creates "what if" scenarios by changing only the protected attribute (e.g., gender from "female" to "male") while keeping all other information identical. If the credit decision changes, it suggests the model may be making decisions based on the protected attribute, which could indicate bias.
                        </small>
                    </div>
                    
                </div>
                
            </div>
        </div>
        
        
        
        <div class="footer">
            <p>Credit Scoring Validator - Bias & Fairness Analysis Report</p>
            <p>This report uses both observational and counterfactual methods to detect potential bias in credit scoring decisions across protected demographic attributes.</p>
        </div>
    </div>
</body>
</html>