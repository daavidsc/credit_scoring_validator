<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Robustness Analysis Report</title>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .metric-card {
            background: white;
            border-radius: 8px;
            padding: 1.5rem;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            margin-bottom: 1rem;
        }
        
        .score-excellent { color: #059669; }
        .score-good { color: #0891b2; }
        .score-fair { color: #d97706; }
        .score-poor { color: #dc2626; }
        
        .perturbation-card {
            background: #f8fafc;
            border: 1px solid #e2e8f0;
            border-radius: 6px;
            padding: 1rem;
            margin: 0.5rem 0;
        }
        
        .failure-case {
            background: #fef2f2;
            border: 1px solid #fecaca;
            border-radius: 6px;
            padding: 1rem;
            margin: 0.5rem 0;
        }
    </style>
</head>
<body class="bg-gray-100">
    <div class="container mx-auto px-4 py-8">
        <h1 class="text-3xl font-bold text-gray-800 mb-6">Robustness Analysis Report</h1>
        
        <!-- Executive Summary -->
        <div class="metric-card">
            <h2 class="text-xl font-semibold text-gray-800 mb-4">Executive Summary</h2>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                <div class="text-center">
                    <div class="text-3xl font-bold score-excellent">98.9%</div>
                    <div class="text-sm text-gray-600">Overall Robustness Score</div>
                </div>
                <div class="text-center">
                    <div class="text-3xl font-bold text-blue-600">98.6%</div>
                    <div class="text-sm text-gray-600">Decision Consistency</div>
                </div>
                <div class="text-center">
                    <div class="text-3xl font-bold text-green-600">140</div>
                    <div class="text-sm text-gray-600">Test Cases</div>
                </div>
            </div>
        </div>
        
        <!-- Robustness Metrics -->
        <div class="metric-card">
            <h2 class="text-xl font-semibold text-gray-800 mb-4">Robustness Metrics</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div>
                    <h3 class="font-medium text-gray-700 mb-2">Decision Consistency</h3>
                    <p class="text-sm text-gray-600 mb-2">
                        How consistently the model makes the same decision when input is perturbed.
                    </p>
                    <div class="bg-gray-200 rounded-full h-4 mb-2">
                        <div class="bg-blue-600 h-4 rounded-full" style="width: 98.6%"></div>
                    </div>
                    <div class="text-sm text-gray-600">
                        138 / 140 consistent decisions
                    </div>
                </div>
                
                <div>
                    <h3 class="font-medium text-gray-700 mb-2">Confidence Stability</h3>
                    <p class="text-sm text-gray-600 mb-2">
                        How stable the model's confidence levels are under perturbations.
                    </p>
                    
                    <div class="text-sm">
                        <div>Mean difference: 0.002</div>
                        <div>Max difference: 0.013</div>
                        <div>Std deviation: 0.004</div>
                    </div>
                    
                </div>
            </div>
        </div>
        
        <!-- Perturbation Analysis -->
        <div class="metric-card">
            <h2 class="text-xl font-semibold text-gray-800 mb-4">Analysis by Perturbation Type</h2>
            <div class="space-y-3">
                
                <div class="perturbation-card">
                    <div class="flex justify-between items-center mb-2">
                        <h3 class="font-medium text-gray-700">Noise Numerical</h3>
                        <span class="text-sm bg-blue-100 text-blue-800 px-2 py-1 rounded">28 tests</span>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4 text-sm">
                        <div>
                            <span class="text-gray-600">Consistency Rate:</span>
                            <span class="font-medium ml-2">92.9%</span>
                        </div>
                        <div>
                            <span class="text-gray-600">Avg Confidence Drop:</span>
                            <span class="font-medium ml-2">0.002</span>
                        </div>
                        <div>
                            <span class="text-gray-600">Max Confidence Drop:</span>
                            <span class="font-medium ml-2">0.013</span>
                        </div>
                    </div>
                </div>
                
                <div class="perturbation-card">
                    <div class="flex justify-between items-center mb-2">
                        <h3 class="font-medium text-gray-700">Typos Text</h3>
                        <span class="text-sm bg-blue-100 text-blue-800 px-2 py-1 rounded">28 tests</span>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4 text-sm">
                        <div>
                            <span class="text-gray-600">Consistency Rate:</span>
                            <span class="font-medium ml-2">100.0%</span>
                        </div>
                        <div>
                            <span class="text-gray-600">Avg Confidence Drop:</span>
                            <span class="font-medium ml-2">0.000</span>
                        </div>
                        <div>
                            <span class="text-gray-600">Max Confidence Drop:</span>
                            <span class="font-medium ml-2">0.000</span>
                        </div>
                    </div>
                </div>
                
                <div class="perturbation-card">
                    <div class="flex justify-between items-center mb-2">
                        <h3 class="font-medium text-gray-700">Case Change</h3>
                        <span class="text-sm bg-blue-100 text-blue-800 px-2 py-1 rounded">28 tests</span>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4 text-sm">
                        <div>
                            <span class="text-gray-600">Consistency Rate:</span>
                            <span class="font-medium ml-2">100.0%</span>
                        </div>
                        <div>
                            <span class="text-gray-600">Avg Confidence Drop:</span>
                            <span class="font-medium ml-2">0.000</span>
                        </div>
                        <div>
                            <span class="text-gray-600">Max Confidence Drop:</span>
                            <span class="font-medium ml-2">0.000</span>
                        </div>
                    </div>
                </div>
                
                <div class="perturbation-card">
                    <div class="flex justify-between items-center mb-2">
                        <h3 class="font-medium text-gray-700">Missing Values</h3>
                        <span class="text-sm bg-blue-100 text-blue-800 px-2 py-1 rounded">28 tests</span>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4 text-sm">
                        <div>
                            <span class="text-gray-600">Consistency Rate:</span>
                            <span class="font-medium ml-2">100.0%</span>
                        </div>
                        <div>
                            <span class="text-gray-600">Avg Confidence Drop:</span>
                            <span class="font-medium ml-2">0.000</span>
                        </div>
                        <div>
                            <span class="text-gray-600">Max Confidence Drop:</span>
                            <span class="font-medium ml-2">0.000</span>
                        </div>
                    </div>
                </div>
                
                <div class="perturbation-card">
                    <div class="flex justify-between items-center mb-2">
                        <h3 class="font-medium text-gray-700">Extreme Values</h3>
                        <span class="text-sm bg-blue-100 text-blue-800 px-2 py-1 rounded">28 tests</span>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4 text-sm">
                        <div>
                            <span class="text-gray-600">Consistency Rate:</span>
                            <span class="font-medium ml-2">100.0%</span>
                        </div>
                        <div>
                            <span class="text-gray-600">Avg Confidence Drop:</span>
                            <span class="font-medium ml-2">0.000</span>
                        </div>
                        <div>
                            <span class="text-gray-600">Max Confidence Drop:</span>
                            <span class="font-medium ml-2">0.000</span>
                        </div>
                    </div>
                </div>
                
            </div>
        </div>
        
        <!-- Visualization -->
        <div class="metric-card">
            <h2 class="text-xl font-semibold text-gray-800 mb-4">Perturbation Impact Visualization</h2>
            <div id="perturbation-chart" style="height: 400px;"></div>
        </div>
        
        <!-- Failure Cases -->
        
        <div class="metric-card">
            <h2 class="text-xl font-semibold text-gray-800 mb-4">Failure Cases</h2>
            <p class="text-sm text-gray-600 mb-4">
                Cases where the model showed significant inconsistency or confidence drops.
            </p>
            <div class="space-y-3 max-h-96 overflow-y-auto">
                
                <div class="failure-case">
                    <div class="flex justify-between items-center mb-2">
                        <span class="font-medium text-red-700">Noise Numerical</span>
                        <span class="text-sm text-gray-600">
                            approve → deny
                        </span>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm">
                        <div>
                            <div class="font-medium text-gray-700">Original Response:</div>
                            <div class="text-gray-600 mt-1">score:79 class:Good reason:The credit score is good based on the provided data. The income is sufficient, employment status is stable, and there are no payment defaults. The used credit is well below ...</div>
                        </div>
                        <div>
                            <div class="font-medium text-gray-700">Perturbed Response:</div>
                            <div class="text-gray-600 mt-1">score:68 class:Average reason:The employment duration is very short, which may indicate instability. The used credit is relatively low compared to the credit limit. The income is sufficient. There was...</div>
                        </div>
                    </div>
                    
                    <div class="text-sm text-gray-600 mt-2">
                        Confidence: 0.09 → 0.08
                        (Δ 0.01)
                    </div>
                    
                </div>
                
                <div class="failure-case">
                    <div class="flex justify-between items-center mb-2">
                        <span class="font-medium text-red-700">Noise Numerical</span>
                        <span class="text-sm text-gray-600">
                            approve → deny
                        </span>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm">
                        <div>
                            <div class="font-medium text-gray-700">Original Response:</div>
                            <div class="text-gray-600 mt-1">score:78 class:Good reason:The credit score is good based on the provided data. The income is sufficient, employment duration is reasonable, and the used credit is well below the credit limit. There i...</div>
                        </div>
                        <div>
                            <div class="font-medium text-gray-700">Perturbed Response:</div>
                            <div class="text-gray-600 mt-1">score:68 class:Average reason:The credit score is based on the provided data. The individual has a stable employment status with a decent income, but has a relatively high number of existing loans and...</div>
                        </div>
                    </div>
                    
                    <div class="text-sm text-gray-600 mt-2">
                        Confidence: 0.09 → 0.08
                        (Δ 0.01)
                    </div>
                    
                </div>
                
                
            </div>
        </div>
        
        
        <!-- Recommendations -->
        <div class="metric-card">
            <h2 class="text-xl font-semibold text-gray-800 mb-4">Recommendations</h2>
            <div class="space-y-2 text-sm text-gray-700">
                
                <div class="flex items-start space-x-2">
                    <span class="text-green-500 mt-1">✓</span>
                    <span>Excellent robustness! The model shows strong consistency across perturbations.</span>
                </div>
                
                
                <div class="flex items-start space-x-2">
                    <span class="text-blue-500 mt-1">i</span>
                    <span>Review failure cases to identify patterns in model inconsistencies.</span>
                </div>
                
                <div class="flex items-start space-x-2">
                    <span class="text-blue-500 mt-1">i</span>
                    <span>Consider implementing input validation and normalization for better robustness.</span>
                </div>
                
                <div class="flex items-start space-x-2">
                    <span class="text-blue-500 mt-1">i</span>
                    <span>Regular robustness testing should be part of your ML pipeline.</span>
                </div>
            </div>
        </div>
        
        <!-- Footer -->
        <div class="text-center text-sm text-gray-500 mt-8">
            Generated on 2025-08-20 08:30:14
        </div>
    </div>
    
    <script>
        // Create perturbation impact chart
        const perturbationData = {
            x: ['Noise Numerical','Typos Text','Case Change','Missing Values','Extreme Values'],
            y: [0.9285714285714286,1.0,1.0,1.0,1.0],
            type: 'bar',
            marker: {
                color: ['#059669','#059669','#059669','#059669','#059669']
            },
            text: ['92.9%','100.0%','100.0%','100.0%','100.0%'],
            textposition: 'auto'
        };
        
        const layout = {
            title: 'Consistency Rate by Perturbation Type',
            xaxis: { title: 'Perturbation Type' },
            yaxis: { title: 'Consistency Rate', range: [0, 1] },
            margin: { t: 50, b: 100, l: 80, r: 50 }
        };
        
        Plotly.newPlot('perturbation-chart', [perturbationData], layout, {responsive: true});
    </script>
</body>
</html>